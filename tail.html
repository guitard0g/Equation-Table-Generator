</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
<script>
    $( document ).ready(function() {
        var els = document.getElementsByClassName('tex');
        var count = 0
        for(var i=0; i<els.length; i++){
            var kids = els[i].children;
            if(kids.length >= 2){
                var tex = kids[0].innerHTML.replace(/\\\\/g, '\\').replace(/\\begin\{.*?\}/g, '').replace(/\\end\{.*?\}/g, '');
                try{
                    if(tex.length > 0){
                        katex.render(tex, kids[0])
                        kids[1].style.display = 'none';
                        count += 1;
                    }
                    else{
                        kids[1].style.display = 'block';
                        kids[0].style.display = 'none';
                        var name = "http://www.columbia.edu/~kk3161/"+kids[1].className+".png";
                        kids[1].src = name;
                    }
                }
                catch(e){
                    kids[1].style.display = 'block';
                    kids[0].style.display = 'none';
                    var name = "http://www.columbia.edu/~kk3161/"+kids[1].className+".png";
                    kids[1].src = name;
                }
            }
        }
    });
</script>
</html>
